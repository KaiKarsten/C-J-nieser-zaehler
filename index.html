<!DOCTYPE html>
<html lang="de">

<head>
  <!-- Firebase App und Datenbank v8 einbinden -->
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

  <script>
    // Firebase-Konfiguration
    const firebaseConfig = {
      apiKey: "AIzaSyBqYKjJ7-2cW_ZU9i2v4xHA6YozREKEeVs",
      authDomain: "cj-nieser-zaehler.firebaseapp.com",
      databaseURL: "https://cj-nieser-zaehler-default-rtdb.europe-west1.firebasedatabase.app",
      projectId: "cj-nieser-zaehler",
      storageBucket: "cj-nieser-zaehler.appspot.com",
      messagingSenderId: "1013552974212",
      appId: "1:1013552974212:web:9499691201617b01d675d1"
    };

    // Firebase initialisieren und sicherstellen, dass das DOM geladen ist
    window.onload = function() {
      firebase.initializeApp(firebaseConfig);

      // Firebase-Datenbank
      const database = firebase.database();

      // Referenzen zu den Zählern in der Firebase-Datenbank
      const kaiRef = database.ref('kaiCounter');
      const lucaRef = database.ref('lucaCounter');

      // Kai's Counter synchronisieren
      kaiRef.on('value', (snapshot) => {
        const value = snapshot.val();
        document.getElementById("counter").innerText = value || 0;
      });

      function increase() {
        kaiRef.once('value', (snapshot) => {
          let count = snapshot.val() || 0;
          count++;
          kaiRef.set(count);
        });
      }

      function decrease() {
        kaiRef.once('value', (snapshot) => {
          let count = snapshot.val() || 0;
          count--;
          kaiRef.set(count);
        });
      }

      // Luca's Counter synchronisieren
      lucaRef.on('value', (snapshot) => {
        const value = snapshot.val();
        document.getElementById("counter2").innerText = value || 0;
      });

      function increase2() {
        lucaRef.once('value', (snapshot) => {
          let count2 = snapshot.val() || 0;
          count2++;
          lucaRef.set(count2);
        });
      }

      function decrease2() {
        lucaRef.once('value', (snapshot) => {
          let count2 = snapshot.val() || 0;
          count2--;
          lucaRef.set(count2);
        });
      }

      // Binde die Funktionen an die globalen Klick-Handler
      window.increase = increase;
      window.decrease = decrease;
      window.increase2 = increase2;
      window.decrease2 = decrease2;
    };
  </script>
</head>

<body>
  <h1> hello world </h1>
  
  <!-- Kai Counter -->
  <div id="counter">0</div>
  <button onclick="increase()"> Kai hoch  </button>
  <button onclick="decrease()"> Kai runter </button>

  <!-- Luca Counter -->
  <div id="counter2">0</div>
  <button onclick="increase2()"> Luca hoch  </button>
  <button onclick="decrease2()"> Luca runter </button>

  <h2> Ice Matcha Latte, zu spät beim Pilatessshs </h2>
</body>
</html>
